<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PsiTabs</title>
  <link rel="stylesheet" href="../css/popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>PsiTabs</h1>
      <div class="actions">
        <button id="open-sidebar-btn" title="Open in sidebar">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="9" y1="3" x2="9" y2="21"></line>
          </svg>
        </button>
        <button id="options-btn" title="Settings">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
        </button>
      </div>
    </header>

    <div class="tabs-section">
      <div class="section-header">
        <h2>Current Window</h2>
        <div class="section-actions">
          <button id="refresh-tabs-btn" title="Refresh tabs">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="1 4 1 10 7 10"></polyline>
              <polyline points="23 20 23 14 17 14"></polyline>
              <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
            </svg>
          </button>
        </div>
      </div>

      <div class="tab-actions">
        <div class="tab-action-group">
          <button id="sort-url-btn" title="Sort by URL">Sort URL</button>
          <button id="sort-title-btn" title="Sort by title">Sort Title</button>
        </div>
        <div class="tab-action-group">
          <button id="find-duplicates-btn" title="Find duplicate tabs">Find Duplicates</button>
        </div>
      </div>

      <div id="tab-count" class="tab-count">0 tabs</div>

      <div id="tabs-container" class="tabs-container">
        <div class="loading">Loading tabs...</div>
      </div>
    </div>

    <div class="llm-section">
      <div class="section-header">
        <h2>AI Features</h2>
      </div>

      <div class="llm-actions">
        <button id="group-by-topic-btn" title="Group tabs by topic using AI">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
            <line x1="12" y1="22.08" x2="12" y2="12"></line>
          </svg>
          Group by Topic
        </button>
        <button id="summarize-tab-btn" title="Summarize current tab">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="21" y1="10" x2="3" y2="10"></line>
            <line x1="21" y1="6" x2="3" y2="6"></line>
            <line x1="21" y1="14" x2="3" y2="14"></line>
            <line x1="21" y1="18" x2="7" y2="18"></line>
          </svg>
          Summarize Tab
        </button>
      </div>

      <div id="llm-status" class="llm-status">
        <div class="llm-status-message">LLM Not Configured</div>
        <a href="#" id="configure-llm-btn">Configure</a>
      </div>
    </div>

    <div class="groups-section">
      <div class="section-header">
        <h2>Tab Groups</h2>
        <div class="section-actions">
          <button id="save-groups-btn" title="Save Groups">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
              <polyline points="17 21 17 13 7 13 7 21"></polyline>
              <polyline points="7 3 7 8 15 8"></polyline>
            </svg>
          </button>
        </div>
      </div>

      <div id="groups-container" class="groups-container">
        <div class="no-groups">No active tab groups</div>
      </div>
    </div>

    <footer>
      <div class="footer-links">
        <a href="#" id="save-session-btn">Save Session</a>
        <a href="#" id="view-sessions-btn">View Sessions</a>
      </div>
    </footer>
  </div>

  <div id="summary-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Tab Summary</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div id="summary-content" class="summary-content">
          <div class="loading">Generating summary...</div>
        </div>
      </div>
    </div>
  </div>

  <script src="../js/popup.js" type="module"></script>
</body>
</html>